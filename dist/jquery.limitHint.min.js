"use strict";function _toConsumableArray(t){if(Array.isArray(t)){for(var i=0,a=Array(t.length);i<t.length;i++)a[i]=t[i];return a}return Array.from(t)}!function(t){function i(t,i,n,e){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",l="",o=!1;switch(t){case"maxlen":l=((o=(d=a(!1,i,r))>=0)?n:e).replace("{0}",o?d:-d);break;case"maxlen-bytes":var d;l=((o=(d=a(!0,i,r))>=0)?n:e).replace("{0}",o?d:-d)}return{text:l,isValid:o}}function a(){var t,i,a=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=arguments[1],e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return n-(a?(t=/[^\u4e00-\u9fa5]/,i=0,[].concat(_toConsumableArray(e)).forEach(function(a,n,e){i+=t.test(a)?1:2}),i):e.length)}t.fn.LimitHint=function(a){!function(a,n){var e=t("<div>").addClass("LimitHint").append(t("<p>").addClass("length-value"));n.each(function(n,r){var l,o,d,s=t(r),f=s.attr(a.tags.limit_type),u=s.attr(a.tags.limit_content),c=s.attr(a.tags.position)?s.attr(a.tags.position):a.position,v=s.attr(a.tags["text-valid"])?s.attr(a.tags["text-valid"]):t.fn.LimitHint.limit_type[f]["text-valid"],m=s.attr(a.tags["text-invalid"])?s.attr(a.tags["text-invalid"]):t.fn.LimitHint.limit_type[f]["text-invalid"],p=t.fn.LimitHint.limit_type[f].description,y=s.attr(a.tags.delay)?s.attr(a.tags.delay):a.delay;s.on("focus",function(){if(e.removeAttr("required"),s.attr("required")&&e.attr("required","required"),!s.attr("readonly")){var t=i(f,u,v,m,s.val());e.find("p.length-value").html(t.text),[s,e].forEach(function(i,a,n){i.attr("invalid",t.isValid?"false":"true")}),s.parent().css({position:"relative"}),e.removeClass(function(t,i){return(i.match(/(^|\s)position-\S+/g)||[]).join(" ")}),e.addClass("position-"+c),c.indexOf("top")>0?s.before(e):s.after(e),e.attr("title",p),e.css({display:"inline-block"})}}),s.on("focusout",function(){s.attr("readonly")||e.hide()}),s.on("keyup",(l=function(t){if(!s.attr("readonly")){var a=i(f,u,v,m,s.val());e.find("p.length-value").html(a.text),[s,e].forEach(function(t,i,n){t.attr("invalid",a.isValid?"false":"true")})}},o=y,d=0,function(){clearTimeout(d);for(var t=arguments.length,i=Array(t),a=0;a<t;a++)i[a]=arguments[a];d=setTimeout(l.bind.apply(l,[this].concat(i)),o||0)}))})}(t.extend({},t.fn.LimitHint.defaults,a),this)},t.fn.LimitHint.defaults={tags:{auto_discover:"data-limit-hint",limit_type:"data-limit-hint-type",limit_content:"data-limit-hint-content",position:"data-limit-hint-position",delay:"data-limit-hint-delay","text-valid":"data-limit-hint-text-valid","text-invalid":"data-limit-hint-text-invalid"},position:"top-left",delay:200},t.fn.LimitHint.limit_type={maxlen:{"text-valid":"還剩餘 {0} 個字","text-invalid":"已超過 {0} 個字",description:"最大字數限制：中、英文字皆佔1個單位"},"maxlen-bytes":{"text-valid":"還剩餘 {0} 個字","text-invalid":"已超過 {0} 個字",description:"最大字數限制：繁/簡中字佔2個單位，其他則佔1個單位"}}}(jQuery);