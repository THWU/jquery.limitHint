"use strict";function _toConsumableArray(t){if(Array.isArray(t)){for(var i=0,n=Array(t.length);i<t.length;i++)n[i]=t[i];return n}return Array.from(t)}!function(t){function i(t,i,a){var e=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",r="",o=!1;switch(t){case"maxlen":o=(l=n(!1,i,e))>=0,r=a.replace("{0}",l);break;case"maxlen-bytes":var l;o=(l=n(!0,i,e))>=0,r=a.replace("{0}",l)}return{text:r,isValid:o}}function n(){var t,i,n=arguments.length>0&&void 0!==arguments[0]&&arguments[0],a=arguments[1],e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return a-(n?(t=/[^\u4e00-\u9fa5]/,i=0,[].concat(_toConsumableArray(e)).forEach(function(n,a,e){i+=t.test(n)?1:2}),i):e.length)}t.fn.LimitHint=function(n){!function(n,a){var e=t("<div>").addClass("LimitHint").append(t("<p>").addClass("length-value"));a.each(function(a,r){var o=t(r),l=o.attr(n.tags.limit_type),s=o.attr(n.tags.limit_content),u=(o.attr(n.tags.position),n["text-valid"]);o.on("focus",function(){if(e.removeAttr("required"),o.attr("required")&&e.attr("required","required"),!o.attr("readonly")){var t=i(l,s,u,o.val());e.find("p.length-value").text(t.text),[o,e].forEach(function(i,n,a){i.attr("invalid",t.isValid?"false":"true")}),o.parent().css({position:"relative"}),e.removeClass(function(t,i){return(i.match(/(^|\s)position-\S+/g)||[]).join(" ")}),e.addClass("position-"+o.attr(n.tags.position)),o.attr(n.tags.position).indexOf("top")>0?o.before(e):o.after(e),e.show()}}),o.on("focusout",function(){o.attr("readonly")||e.hide()}),o.on("keyup",function(){if(!o.attr("readonly")){var t=i(l,s,u,o.val());e.find("p.length-value").text(t.text),[o,e].forEach(function(i,n,a){i.attr("invalid",t.isValid?"false":"true")})}})})}(t.extend({},t.fn.LimitHint.defaults,n),this)},t.fn.LimitHint.defaults={tags:{auto_discover:"data-limit-hint",limit_type:"data-limit-hint-type",limit_content:"data-limit-hint-content",position:"data-limit-hint-position"},"text-valid":"還剩餘 {0} 個字"},t.fn.LimitHint.limit_type={maxlen:{Description:"最大字數限制：中、英文字皆判斷1個單位"},"maxlen-bytes":{Description:"最大字數限制：繁/簡中字為2個單位，其他則為1個單位"}}}(jQuery);